{% extends 'forecast/base.html' %}

{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'forecast/css/main.css' %}" xmlns="http://www.w3.org/1999/html">
{% endblock %}

{% block title %} {{title}} {% endblock %}

{% block content %}

<div class="city">
    <h1></h1>
    <form method="post">
        {% csrf_token %}

        {{form.city}}

        <button type="submit" class="btn btn-primary btn-block btn-large">Получить прогноз</button>
    </form>
    <div class="forecast">
        {% for dt in date_and_temperature_list %}
            <div class="forecast__days">{{dt.date|date:"d"}} {{dt.date|date:"D"}}
                        <br>{{dt.temperature|default:"-"}}&#8451
            </div>
        {% endfor %}
    </div>

</div>

{% endblock %}

{% block script %}
{% if error %}
<script>
document.addEventListener('readystatechange', event => {
    // // When HTML/DOM elements are ready:
    // if (event.target.readyState === "interactive") {   //does same as:  ..addEventListener("DOMContentLoaded"..
    //     alert("hi 1");
    // }

    // When window loaded ( external resources are loaded too- `css`,`src`, etc...)
    if (event.target.readyState === "complete") {
        alert("hi 2");
    }
});
</script>
{% endif %}
{% endblock script %}
<!--{% if error %}-->
<!--        <script>alert("К сожалению указанный город не удалось определить")</script>-->
<!--{% endif %}-->
